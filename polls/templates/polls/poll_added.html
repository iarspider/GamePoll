{% extends "polls/generic_message.html" %}

{% block title %}–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ{% endblock %}
{% block icon %}‚úÖ{% endblock %}
{% block icon_color %}#4CAF50{% endblock %}

{% block message %}
–ù–æ–≤–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ &laquo;{{ poll.title }}&raquo; —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ –∏ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ –≤ —Å–ø–∏—Å–∫–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π.
<div class="input-group mt-3" style="max-width: 400px; margin: 0 auto;">
  <input type="text" id="pollLink" class="form-control" readonly
         value="{{ request.scheme }}://{{ request.get_host }}{% url "vote_add" poll.id %}">
  <button class="btn btn-outline-secondary" type="button" id="copyButton">üîó</button>
</div>
{% endblock %}

{% block buttons %}
  <a href="{% url 'poll_list' %}" class="btn btn-primary">–ö —Å–ø–∏—Å–∫—É –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π</a>
  <a href="{% url 'poll_add' %}" class="btn btn-secondary">–°–æ–∑–¥–∞—Ç—å –µ—â—ë</a>
{% endblock %}

{% block scripts %}
<script>
document.getElementById("copyButton").addEventListener("click", function () {
  const input = document.getElementById("pollLink");
  input.select();
  input.setSelectionRange(0, 99999); // –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
  navigator.clipboard.writeText(input.value).then(() => {
    this.textContent = "‚úÖ";
    setTimeout(() => this.textContent = "üîó", 1500);
  });
});
</script>
{% endblock %}
